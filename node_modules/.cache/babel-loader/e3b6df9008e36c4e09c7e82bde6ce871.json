{"ast":null,"code":"var _jsxFileName = \"E:\\\\\\u0423\\u043D\\u0438\\u0432\\u0435\\u0440\\\\3 \\u043A\\u0443\\u0440\\u0441\\\\\\u0410\\u0412\\u041F\\u0417\\\\\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\\\CraftCuts\\\\Rep\\\\mainFront2\\\\CraftCuts_Front\\\\src\\\\components\\\\Login\\\\Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport s from \"./Login.module.css\";\nimport imagecol from \"./login_image.png\";\nimport { NavLink } from \"react-router-dom\";\nimport Cabinet from \"../UserCabinet/Cabinet\";\nimport { useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login({\n  setIsLoggedIn,\n  isLoggedIn\n}) {\n  _s();\n\n  const [Email, setEmail] = useState(\"\");\n  const [Password, setPassword] = useState(\"\");\n  const history = useHistory();\n  const [loading, setLoading] = useState(true);\n  const [statusCode, setStatusCode] = useState(null);\n  useEffect(() => {\n    if (localStorage.getItem('user-info') && isLoggedIn == true) {\n      history.push(\"/cabinet\");\n    }\n  }, []);\n\n  function validateForm() {\n    return Email.length > 0 && Password.length > 0;\n  }\n\n  async function myLoginAPI(e) {\n    e.preventDefault();\n    let item = {\n      Password,\n      Email\n    };\n\n    try {\n      let result = await fetch(\"https://craftcutstestapiproject20211120225609.azurewebsites.net/api/Customer/Auth\", {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          Email: Email,\n          Password: Password\n        })\n      });\n      console.log({\n        Email,\n        Password\n      });\n      result = await result.json();\n      setLoading(false);\n      setStatusCode(status);\n      localStorage.setItem(\"user-info\", JSON.stringify(result));\n      localStorage.setItem('isLoggedIn', true);\n      setIsLoggedIn(true);\n      history.push(\"/cabinet\");\n      console.log(result);\n    } catch (e) {\n      // ответ пока не получен - загрузка\n      if (loading) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }, this);\n      } // ответ получен, но нет статуса ответа (смотри консоль)\n\n\n      if (!this.state.loading && !this.state.statusCode) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Something went wrong. See console logging.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 25\n        }, this);\n      } // ответ получен, статус 200\n\n\n      if (this.state.statusCode === 200) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"All good\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this);\n      } // ответ получен, статус 404\n\n\n      if (this.state.statusCode === 404) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Not found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this);\n      } // ответ получен, остальные статусы\n\n\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Unexpected status code: \", this.state.statusCode]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: myLoginAPI,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.row,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.col_6,\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: s.item,\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: s.logo,\n            children: \"Craft Cuts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this), \"  \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: s.h5welcome,\n          children: [\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C \\u0432 \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: s.craftcuts_red,\n            children: \"Craft Cuts\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 64\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: s.login,\n          children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: s.Login,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"email\",\n            onChange: e => setEmail(e.target.value),\n            className: \"s.email_input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"password\",\n            onChange: e => setPassword(e.target.value),\n            className: \"s.password_input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: s.btn_login,\n            children: \"Login \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.col_6,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: s.img_block,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: s.imagecol,\n            src: imagecol,\n            alt: \"image_left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"MHXY2tEBwwGURq64a+7Fhfpc9+Q=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["E:/Универ/3 курс/АВПЗ/Проект/CraftCuts/Rep/mainFront2/CraftCuts_Front/src/components/Login/Login.jsx"],"names":["React","useEffect","useState","Form","Button","s","imagecol","NavLink","Cabinet","useHistory","Login","setIsLoggedIn","isLoggedIn","Email","setEmail","Password","setPassword","history","loading","setLoading","statusCode","setStatusCode","localStorage","getItem","push","validateForm","length","myLoginAPI","e","preventDefault","item","result","fetch","method","headers","body","JSON","stringify","console","log","json","status","setItem","state","row","col_6","logo","h5welcome","craftcuts_red","login","target","value","btn_login","img_block"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport s from \"./Login.module.css\";\r\nimport imagecol from \"./login_image.png\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport Cabinet from \"../UserCabinet/Cabinet\";\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n\r\nexport default function Login({setIsLoggedIn, isLoggedIn}) {\r\n    const [Email, setEmail] = useState(\"\");\r\n    const [Password, setPassword] = useState(\"\");\r\n    const history = useHistory();\r\n    const [loading, setLoading] = useState(true);\r\n    const [statusCode, setStatusCode] = useState(null);\r\n    useEffect(() => {\r\n        if(localStorage.getItem('user-info') && isLoggedIn == true){\r\n            history.push(\"/cabinet\")\r\n        }\r\n    }, [])\r\n\r\n    function validateForm() {\r\n        return Email.length > 0 && Password.length > 0;\r\n    }\r\n\r\n    async function myLoginAPI(e) {\r\n        e.preventDefault();\r\n        let item = {Password, Email};\r\n        try{\r\n        let result = await fetch(\"https://craftcutstestapiproject20211120225609.azurewebsites.net/api/Customer/Auth\", {\r\n            method: 'POST',\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Accept\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({Email: Email, Password: Password}),\r\n        });\r\n            console.log({Email, Password});\r\n            result = await result.json();\r\n            setLoading(false);\r\n            setStatusCode(status);\r\n            localStorage.setItem(\"user-info\", JSON.stringify(result));\r\n            localStorage.setItem('isLoggedIn', true);\r\n            setIsLoggedIn(true);\r\n            history.push(\"/cabinet\")\r\n            console.log(result);\r\n        }\r\n        catch (e){\r\n            // ответ пока не получен - загрузка\r\n            if (loading) {\r\n                return (<p>Loading...</p>);\r\n            }\r\n\r\n            // ответ получен, но нет статуса ответа (смотри консоль)\r\n            if (!this.state.loading && !this.state.statusCode) {\r\n                return (<p>Something went wrong. See console logging.</p>);\r\n            }\r\n\r\n            // ответ получен, статус 200\r\n            if (this.state.statusCode === 200) {\r\n                return (<p>All good</p>);\r\n            }\r\n\r\n            // ответ получен, статус 404\r\n            if (this.state.statusCode === 404) {\r\n                return (<p>Not found</p>);\r\n            }\r\n\r\n            // ответ получен, остальные статусы\r\n            return (<p>Unexpected status code: {this.state.statusCode}</p>);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n\r\n        <form onSubmit={myLoginAPI}>\r\n        <div className={s.row}>\r\n            <div className={s.col_6}>\r\n                <li className={s.item}>\r\n                    <h5 className={s.logo}>\r\n                        Craft Cuts</h5>  </li>\r\n                <h5 className={s.h5welcome}>Добро пожаловать в <span className={s.craftcuts_red}>Craft Cuts</span>\r\n                </h5>\r\n                <h1 className={s.login}>Войти</h1>\r\n                <div className={s.Login}>\r\n                    <input type=\"text\" placeholder=\"email\" onChange={(e)=>setEmail(e.target.value)} className=\"s.email_input\"/>\r\n                    <input type=\"text\" placeholder=\"password\" onChange={(e)=>setPassword(e.target.value)} className=\"s.password_input\"/>\r\n                    <button type=\"submit\" className={s.btn_login}>Login </button>\r\n                    {/*<button onClick={myLoginAPI} className={s.btn_login}>Login</button>*/}\r\n                    {/*<NavLink to = \"/cabinet\" block size=\"lg\" className={s.btn_login}>*/}\r\n                    {/*    Login*/}\r\n                    {/*</NavLink>*/}\r\n\r\n                </div>\r\n            </div>\r\n            <div className={s.col_6}>\r\n                <div className={s.img_block}>\r\n                    <img className = {s.imagecol} src={imagecol} alt=\"image_left\"></img></div>\r\n            </div>\r\n        </div>\r\n        </form>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}